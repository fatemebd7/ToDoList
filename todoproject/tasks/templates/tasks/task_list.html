{% extends "base.html" %}
{% block content %}
<div class="flex min-h-screen bg-gray-100">

  <!-- Sidebar -->
  <aside class="w-64 bg-white shadow-lg flex flex-col p-4">
    <h2 class="text-2xl font-bold text-blue-600 mb-6">My Tasks</h2>
    <nav class="flex flex-col gap-2">
      <a href="{% url 'dashboard' %}" class="px-4 py-2 rounded-lg hover:bg-blue-100 hover:text-blue-700 transition-colors">Dashboard</a>
      <a href="{% url 'kanban_board' %}" class="px-4 py-2 rounded-lg hover:bg-yellow-100 hover:text-yellow-700 transition-colors">Kanban Board</a>
      <a href="{% url 'task_create' %}" class="px-4 py-2 rounded-lg bg-blue-600 text-white text-center hover:bg-blue-700 transition-colors">+ Add Task</a>
      <a href="{% url 'logout' %}" class="px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-200 transition-colors mt-4">Logout</a>
    </nav>
  </aside>

  <!-- Main content -->
  <main class="flex-1 p-6">
    <div class="container py-4">
      {% if tasks %}
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {% for task in tasks %}
        <div class="bg-white p-4 rounded-lg shadow hover:shadow-lg transition transform hover:-translate-y-1">
          <div class="flex justify-between items-start">
            <h3 class="font-bold {% if task.completed %}line-through text-gray-400{% endif %}">{{ task.title }}</h3>
            <span class="text-sm 
              {% if task.priority == 'high' %}text-red-600{% elif task.priority == 'medium' %}text-yellow-600{% else %}text-green-600{% endif %}">
              {{ task.priority|capfirst }}
            </span>
          </div>

          {% if task.due_date %}
          <p class="text-gray-500 text-sm mt-1">
            Due: {{ task.due_date }} - 
            {% if task.days_left > 0 %}
              <span class="text-blue-600">{{ task.days_left }} days left</span>
            {% elif task.days_left == 0 %}
              <span class="text-orange-600">Today</span>
            {% else %}
              <span class="text-red-600">Overdue!</span>
            {% endif %}
          </p>
          {% endif %}

          <div class="mt-2 flex gap-2">
            <a href="{% url 'task_toggle' task.id %}" class="px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 transition text-sm">âœ” Toggle</a>
            <a href="{% url 'task_delete' task.id %}" class="px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 transition text-sm">ðŸ—‘ Delete</a>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <div class="text-center text-gray-500 mt-20">
        ðŸš€ No tasks yet! Start by adding one.
      </div>
      {% endif %}
    </div>
  </main>
</div>
{% endblock %}
