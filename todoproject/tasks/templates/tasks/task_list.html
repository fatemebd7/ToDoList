{% extends "base.html" %}
{% block content %}
<div class="flex min-h-screen bg-gray-100 font-sans">

  <!-- Sidebar -->
  <aside class="w-64 bg-white shadow-lg flex flex-col p-6">
    <h2 class="text-3xl font-extrabold text-blue-600 mb-8"><a href="{% url 'task_list' %}">My Tasks</a> </h2>
     <nav class="flex flex-col gap-3">
      <a href="{% url 'dashboard' %}" class="px-4 py-2 rounded-lg hover:bg-blue-100 hover:text-blue-700 transition-colors">Dashboard</a>
      <a href="{% url 'kanban_board' %}" class="px-4 py-2 rounded-lg hover:bg-yellow-100 hover:text-yellow-700 transition-colors">Kanban Board</a>
      <a href="{% url 'task_create' %}" class="px-4 py-2 rounded-lg bg-blue-600 text-white text-center hover:bg-blue-700 transition-colors">+ Add Task</a>
      <a href="{% url 'logout' %}" class="px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-200 transition-colors">Logout</a>
    </nav>
  </aside>

  <!-- Main content -->
  <main class="flex-1 p-8">
    <div class="container mx-auto">
      {% if tasks %}
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for task in tasks %}
        <div class="bg-white p-5 rounded-xl shadow-md hover:shadow-xl transition-transform transform hover:-translate-y-2 hover:scale-105">
          <div class="flex justify-between items-start mb-2">
            <h3 class="text-lg font-semibold {% if task.completed %}line-through text-gray-400{% endif %}">{{ task.title }}</h3>
            <span class="px-2 py-1 text-sm font-medium rounded 
              {% if task.priority == 'high' %}bg-red-100 text-red-700{% elif task.priority == 'medium' %}bg-yellow-100 text-yellow-700{% else %}bg-green-100 text-green-700{% endif %}">
              {{ task.priority|capfirst }}
            </span>
          </div>

          {% if task.due_date %}
          <p class="text-sm text-gray-500 mt-1">
            Due: <span class="font-medium">{{ task.due_date }}</span> - 
            {% if task.days_left > 0 %}
              <span class="text-blue-600 font-semibold">{{ task.days_left }} days left</span>
            {% elif task.days_left == 0 %}
              <span class="text-orange-600 font-semibold">Today</span>
            {% else %}
              <span class="text-red-600 font-semibold">Overdue!</span>
            {% endif %}
          </p>
          {% endif %}

          <div class="mt-4 flex gap-2">
            <a href="{% url 'task_toggle' task.id %}" class="flex-1 text-center px-3 py-1 bg-green-100 text-green-800 rounded-lg hover:bg-green-200 transition font-medium text-sm">âœ” Toggle</a>
            <a href="{% url 'task_delete' task.id %}" class="flex-1 text-center px-3 py-1 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 transition font-medium text-sm">ðŸ—‘ Delete</a>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <div class="text-center text-gray-400 mt-32 text-lg">
        ðŸš€ No tasks yet! Start by adding one.
      </div>
      {% endif %}
    </div>
  </main>
</div>
{% endblock %}
